///COLUMBUS LAB LS - supports 2 crew///
@PART[ht2_moduleColumbus]:NEEDS[HabTech2]:AFTER[KerbalismDefault]
{
	@description ^= :^:<color=green>Columbus</color> :
}

@PART[ht2_moduleCupola]:NEEDS[HabTech2]:AFTER[KerbalismDefault]
{
	@description ^= :^:<color=green>Cupola</color> :
}


///DESTINY LAB LS - supports 3 crew///
@PART[ht2_moduleDestiny]:NEEDS[HabTech2]:AFTER[KerbalismDefault]
{
	@description ^= :^:<color=green>Destiny</color> :
}

///HARMONY NODE LS - supports 6 crew///
@PART[ht2_moduleHarmony]:NEEDS[HabTech2]:AFTER[KerbalismDefault]
{
	@description ^= :^:<color=green>Harmony (Node 2)</color> :
}

///KIBO LOGISTICS LS///
@PART[ht2_moduleJEMlogistics]:NEEDS[HabTech2,!B9PartSwitch,CommunityResourcePack,ProfileDefault]:AFTER[zzzKerbalismDefault]
{
	@tags ^= :$: container food water waste sewage:
	%ContainerVolume = 2000

	MODULE
	{
		name = Configure
		title = Supply Container
		slots = 1
		symmetric = true

		SETUP
		{
			name = Supplies	//	Ratio of Food and Water amounts are the same as a Kerbals intake
			desc = Store a balanced supply of <b>Food</b> and <b>Water</b>.

			RESOURCE
			{
				name = Food
				amount = 0.7221584
				maxAmount = 0.7221584
				@amount *= #$/ContainerVolume$
				@maxAmount *= #$/ContainerVolume$
			}

			RESOURCE
			{
				name = Water
				amount = 0.2778416
				maxAmount = 0.2778416
				@amount *= #$/ContainerVolume$
				@maxAmount *= #$/ContainerVolume$
			}
		}

		SETUP
		{
			name = Food

			RESOURCE
			{
				name = Food
				amount = 1
				maxAmount = 1
				@amount *= #$/ContainerVolume$
				@maxAmount *= #$/ContainerVolume$
			}
		}

		SETUP
		{
			name = Water

			RESOURCE
			{
				name = Water
				amount = 1
				maxAmount = 1
				@amount *= #$/ContainerVolume$
				@maxAmount *= #$/ContainerVolume$
			}
		}

		SETUP
		{
			name = Sewage	//	Ratio of Waste and WasteWater amounts are the same as a Kerbals output
			desc = Store solid and liquid organic <b>Waste</b>.

			RESOURCE
			{
				name = Waste
				amount = 0
				maxAmount = 0.4946378
				@amount *= #$/ContainerVolume$
				@maxAmount *= #$/ContainerVolume$
			}

			RESOURCE
			{
				name = WasteWater
				amount = 0
				maxAmount = 0.5053622
				@amount *= #$/ContainerVolume$
				@maxAmount *= #$/ContainerVolume$
			}
		}

		SETUP
		{
			name = Waste

			RESOURCE
			{
				name = Waste
				amount = 0
				maxAmount = 1
				@amount *= #$/ContainerVolume$
				@maxAmount *= #$/ContainerVolume$
			}
		}

		SETUP
		{
			name = WasteWater

			RESOURCE
			{
				name = WasteWater
				amount = 0
				maxAmount = 1
				@amount *= #$/ContainerVolume$
				@maxAmount *= #$/ContainerVolume$
			}
		}
	}
}

@PART[ht2_moduleJEMlogistics]:NEEDS[HabTech2,B9PartSwitch,CommunityResourcePack,!ProfileNone]:AFTER[zzzKerbalismDefault]
{
	@tags ^= :$: container food water waste sewage:

	@MODULE[ModuleB9PartSwitch]:HAS[@SUBTYPE[Water]:HAS[#tankType[HT2Water]]]
	{
		-SUBTYPE[Water]:HAS[#tankType[HT2Water]] { }
	}

	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = tankSwitch1
		switcherDescription = Container	Type
		baseVolume = 2000

		SUBTYPE
		{
			name = Food
			tankType = Food
			title = Food
		}

		SUBTYPE
		{
			name = Water
			tankType = Water
			title = Water
		}

		SUBTYPE
		{
			name = Supplies
			tankType = Supplies
			title = Supplies
		}

		SUBTYPE
		{
			name = Waste
			tankType = Waste
			title = Waste
		}

		SUBTYPE
		{
			name = WasteWater
			tankType = WasteWater
			title = Wet Waste
		}

		SUBTYPE
		{
			name = Sewage
			tankType = Sewage
			title = Sewage
		}
	}
}

@PART[ht2_moduleJEMlogistics]:NEEDS[HabTech2,CommunityCategoryKit]:AFTER[zzzKerbalismDefault]
{
	%tags = #$tags$ cck-containers cck-lifesupport
}

@PART[ht2_moduleJEMlogistics]:NEEDS[HabTech2,CommunityCategoryKit,!FilterExtensions]:AFTER[zzzKerbalismDefault]
{
	%category = none 
}

@PART[ht2_moduleJEMlogistics]:HAS[!MODULE[ModuleInventoryPart]]:NEEDS[HabTech2,SquadExpansion/Serenity]:AFTER[zzzKerbalismDefault]
{
	@tags ^= :$: inventory:

	MODULE
	{
		name = ModuleInventoryPart		
		InventorySlots = 12
	}		
}

///KIBO LAB LS - supports 5 crew///
@PART[ht2_moduleKibo]:NEEDS[HabTech2]:AFTER[KerbalismDefault]
{
	@description ^= :^:<color=green>Japanese Experiment Module (JEM) aka. Kibo</color> :
}

///LAB NODE LS - supports 6 crew///
@PART[ht2_moduleLabNode]:NEEDS[HabTech2]:AFTER[KerbalismDefault]
{
	@description ^= :^:<color=green>Docking Hub System (DHS) Node 4</color> :
}

///Quest Airlock - provides just a pressure control and can be updated to have a scrubber
@PART[ht2_moduleQuest]:NEEDS[HabTech2]:AFTER[KerbalismDefault]
{
	@description ^= :^:<color=green>Quest (Joint Airlock)</color> :
}

///UNITY NODE LS - supports 4 crew///
@PART[ht2_moduleUnity]:NEEDS[HabTech2]:AFTER[KerbalismDefault]
{
	@description ^= :^:<color=green>Unity (Node 1)</color> :
}

///MPLM LS///
@PART[ht2_MPLM]:NEEDS[HabTech2,!B9PartSwitch,CommunityResourcePack,ProfileDefault]:AFTER[zzzKerbalismDefault]
{
	@tags ^= :$: food water waste sewage:
	%ContainerVolume = 3000

	MODULE
	{
		name = Configure
		title = Supply Container
		slots = 1
		symmetric = true

		SETUP
		{
			name = Supplies	//	Ratio of Food and Water amounts are the same as a Kerbals intake
			desc = Store a balanced supply of <b>Food</b> and <b>Water</b>.

			RESOURCE
			{
				name = Food
				amount = 0.7221584
				maxAmount = 0.7221584
				@amount *= #$/ContainerVolume$
				@maxAmount *= #$/ContainerVolume$
			}

			RESOURCE
			{
				name = Water
				amount = 0.2778416
				maxAmount = 0.2778416
				@amount *= #$/ContainerVolume$
				@maxAmount *= #$/ContainerVolume$
			}
		}

		SETUP
		{
			name = Food

			RESOURCE
			{
				name = Food
				amount = 1
				maxAmount = 1
				@amount *= #$/ContainerVolume$
				@maxAmount *= #$/ContainerVolume$
			}
		}

		SETUP
		{
			name = Water

			RESOURCE
			{
				name = Water
				amount = 1
				maxAmount = 1
				@amount *= #$/ContainerVolume$
				@maxAmount *= #$/ContainerVolume$
			}
		}

		SETUP
		{
			name = Sewage	//	Ratio of Waste and WasteWater amounts are the same as a Kerbals output
			desc = Store solid and liquid organic <b>Waste</b>.

			RESOURCE
			{
				name = Waste
				amount = 0
				maxAmount = 0.4946378
				@amount *= #$/ContainerVolume$
				@maxAmount *= #$/ContainerVolume$
			}

			RESOURCE
			{
				name = WasteWater
				amount = 0
				maxAmount = 0.5053622
				@amount *= #$/ContainerVolume$
				@maxAmount *= #$/ContainerVolume$
			}
		}

		SETUP
		{
			name = Waste

			RESOURCE
			{
				name = Waste
				amount = 0
				maxAmount = 1
				@amount *= #$/ContainerVolume$
				@maxAmount *= #$/ContainerVolume$
			}
		}

		SETUP
		{
			name = WasteWater

			RESOURCE
			{
				name = WasteWater
				amount = 0
				maxAmount = 1
				@amount *= #$/ContainerVolume$
				@maxAmount *= #$/ContainerVolume$
			}
		}
	}
}

@PART[ht2_MPLM]:NEEDS[HabTech2,B9PartSwitch,CommunityResourcePack,!ProfileNone]:AFTER[zzzKerbalismDefault]
{
	@tags ^= :$: food water waste sewage:

	@MODULE[ModuleB9PartSwitch]:HAS[@SUBTYPE[Water]:HAS[#tankType[HT2Water]]]
	{
		-SUBTYPE[Water]:HAS[#tankType[HT2Water]] { }
	}
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = tankSwitch1
		switcherDescription = Container	Type
		baseVolume = 3000

		SUBTYPE
		{
			name = Food
			tankType = Food
			title = Food
		}
		SUBTYPE
		{
			name = Water
			tankType = Water
			title = Water
		}
		SUBTYPE
		{
			name = Supplies
			tankType = Supplies
			title = Supplies
		}
		SUBTYPE
		{
			name = Waste
			tankType = Waste
			title = Waste
		}
		SUBTYPE
		{
			name = WasteWater
			tankType = WasteWater
			title = Wet Waste
		}
		SUBTYPE
		{
			name = Sewage
			tankType = Sewage
			title = Sewage
		}
	}
}

@PART[ht2_MPLM]:NEEDS[HabTech2,CommunityCategoryKit]:AFTER[zzzKerbalismDefault]
{
	%tags = #$tags$ cck-containers cck-lifesupport
}

@PART[ht2_MPLM]:NEEDS[HabTech2,CommunityCategoryKit,!FilterExtensions]:AFTER[zzzKerbalismDefault]
{
	%category = none 
}

@PART[ht2_MPLM]:HAS[!MODULE[ModuleInventoryPart]]:NEEDS[HabTech2,SquadExpansion/Serenity]:AFTER[zzzKerbalismDefault]
{
	@tags ^= :$: inventory:

	MODULE
	{
		name = ModuleInventoryPart		
		InventorySlots = 18
	}		
}

-B9_TANK_TYPE[ht2_02]:NEEDS[HabTech2,B9PartSwitch,CommunityResourcePack,!ProfileNone]:AFTER[zzzKerbalismDefault] { }

@PART[ht2_questPod]:NEEDS[HabTech2,!B9PartSwitch,CommunityResourcePack,!ProfileNone]:AFTER[zzzKerbalismDefault]
{
	@tags ^= :$: oxygen hydrogen carbondioxide co2 xenon:
	%ContainerVolume = 40

	MODULE
	{
		name = Configure
		title = Pressurized Tank
		slots = 1
		symmetric = true

		SETUP
		{
			name = Oxygen	// Stored at 200 bar (2940psi) when full
			desc = Store pressurized <b>Oxygen</b> gas @ 200 bar.

			RESOURCE
			{
				name = Oxygen
				amount = 200
				maxAmount = 200
				@amount *= #$/ContainerVolume$
				@maxAmount *= #$/ContainerVolume$
			}
		}

		SETUP
		{
			name = Hydrogen	// Stored at 700 bar (10290psi) when full
			desc = Store pressurized <b>Hydrogen</b> gas @ 700 bar.

			RESOURCE
			{
				name = Hydrogen
				amount = 700
				maxAmount = 700
				@amount *= #$/ContainerVolume$
				@maxAmount *= #$/ContainerVolume$
			}
		}

		SETUP
		{
			name = CarbonDioxide	// Stored at 60bar (882psi) when full
			desc = Store pressurized <b>Carbon dioxide</b> gas @ 60 bar.

			RESOURCE
			{
				name = CarbonDioxide
				amount = 60
				maxAmount = 60
				@amount *= #$/ContainerVolume$
				@maxAmount *= #$/ContainerVolume$
			}
		}

		SETUP
		{
			name = Xenon Gas	Stored at 85 bar (1250psi) when full
			desc = Store pressurized <b>Xenon</b> gas @ 85 bar.
			tech = ionPropulsion

			RESOURCE
			{
				name = XenonGas
				amount = 85
				maxAmount = 85
				@amount *= #$/ContainerVolume$
				@maxAmount *= #$/ContainerVolume$
			}
		}
	}
}

@PART[ht2_questPod]:NEEDS[HabTech2,B9PartSwitch,CommunityResourcePack,!ProfileNone]:AFTER[zzzKerbalismDefault]
{
	@tags ^= :$: oxygen hydrogen carbondioxide co2 xenon:

	@MODULE[ModuleB9PartSwitch]:HAS[@SUBTYPE[Water]:HAS[#tankType[HT2Water]]]
	{
		-SUBTYPE[Water]:HAS[#tankType[HT2Water]] { }
	}
	@MODULE[ModuleB9PartSwitch]:HAS[@SUBTYPE[02]:HAS[#tankType[ht2_02]]]
	{
		-SUBTYPE[02]:HAS[#tankType[ht2_02]] { }
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[tankSwitch],!SUBTYPE[Oxygen]]
	{
		SUBTYPE
		{
			name = Oxygen
			tankType = Oxygen
			title = Oxygen
		}
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[tankSwitch],!SUBTYPE[Hydrogen]]
	{
		SUBTYPE
		{
			name = Hydrogen
			tankType = Hydrogen
			title = Hydrogen
		}
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[tankSwitch],!SUBTYPE[CarbonDioxide]]
	{
		SUBTYPE
		{
			name = CarbonDioxide
			tankType = CarbonDioxide
			title = CO2
		}
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[tankSwitch],!SUBTYPE[XenonGas]]
	{
		SUBTYPE
		{
			name = XenonGas
			tankType = XenonGas
			title = Xenon Gas
		}
	}
}

@PART[ht2_*]:HAS[@MODULE[ModuleB9PartSwitch]:HAS[@SUBTYPE:HAS[#tankType[ht2_02]]]]:NEEDS[HabTech2,B9PartSwitch,CommunityResourcePack,!ProfileNone]:AFTER[zzzKerbalismDefault]
{
		@MODULE[ModuleB9PartSwitch]:HAS[@SUBTYPE:HAS[#tankType[ht2_02]]]
		{
				@SUBTYPE:HAS[#tankType[ht2_02]]
				{
						@tankType = Oxygen
				}
		}
}

// @PART[ht2_questPod]:NEEDS[HabTech2]:AFTER[KerbalismDefault]
// {
	// @description ^= :^:<color=green>unidentified</color> :
// }

@PART[ht2_questPod]:NEEDS[HabTech2,CommunityCategoryKit]:AFTER[zzzKerbalismDefault]
{
	%tags = #$tags$ cck-containers cck-lifesupport
}

@PART[ht2_questPod]:NEEDS[HabTech2,CommunityCategoryKit,!FilterExtensions]:AFTER[zzzKerbalismDefault]
{
	%category = none 
}

// @PART[ht2_questRack]:NEEDS[HabTech2]:AFTER[KerbalismDefault]
// {
	// @description ^= :^:<color=green>unidentified</color> :
// }

@PART[ht2_*]:HAS[@MODULE[Configure]:HAS[#title[Pod]]]:NEEDS[HabTech2,ProfileDefault]:AFTER[zzzKerbalismDefault]
{
	-MODULE[Configure]:HAS[#title[Pod]] { }
}
